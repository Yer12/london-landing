server {
    # listen on port 80
    listen 80;

    # where the root here
    root /usr/share/nginx/html;
    # what file to server as index
    index index.html index.htm;


    error_page  405     =200 $uri;

    

    location /privacy-policy/ {
        try_files $uri.html $uri/ /privacy-policy.html;
    }

    # location / {
    #     proxy_method GET;
    #     # First attempt to serve request as file, then
    #     # as directory, then fall back to redirecting to index.html
    #     try_files $uri $uri/ $uri.html /index.html;
    # }

#     location / {
#         rewrite     ^(/.*)\.html$   $1  redirect;
#         try_files $uri $uri/index.html $uri.html =404;
#     }


    # serve apple-app-site-association file
    location /.well-known/apple-app-site-association {
        default_type application/json;
        return 200 '{
  "applinks": {
     "apps": [],
     "details": [
       {
        "appID": "77Z22JCT9H.app.1fit.helsi",
        "paths": [
          "NOT /go",
          "NOT /corporate/*",
          "/*"
        ]
       },
       {
        "appID": "77Z22JCT9H.app.1fit.helsi.in-house",
        "paths": [
          "NOT /go",
          "NOT /corporate/*",
          "/*"
        ]
       }
     ]
  }
}';
    }

    location /.well-known/assetlinks.json {
            default_type application/json;
            return 200 '[
  {
    "relation": ["delegate_permission/common.handle_all_urls"],
    "target": {
      "namespace": "android_app",
      "package_name": "app.helsi",
      "sha256_cert_fingerprints": [
        "89:32:5A:84:92:33:AC:1A:C6:C0:27:63:48:E1:18:25:40:1A:03:AB:56:11:28:06:6E:59:25:B1:EB:00:C0:61"
      ]
    }
  },
  {
    "relation": ["delegate_permission/common.handle_all_urls"],
    "target": {
      "namespace": "android_app",
      "package_name": "app.helsi.debug",
      "sha256_cert_fingerprints": [
        "3D:53:BF:F0:56:DA:67:3D:52:0B:9D:A7:0E:2E:C2:44:FD:20:37:C4:E4:86:E1:76:B2:67:22:0D:E8:5E:0E:12",
"E3:CB:59:02:D8:87:F0:7E:F8:FE:7A:3C:DC:4A:A8:A9:4F:F5:69:7E:0F:36:8A:5B:D6:90:29:C4:A0:D1:08:5F",
"D5:1F:D2:F8:CB:6F:E7:20:C0:6C:C2:84:6D:82:9B:63:69:8C:C3:B8:B9:CD:DA:62:CA:0A:5B:C0:45:93:5B:69"
      ]
    }
  }
]';
    }

    # Media: images, icons, video, audio, HTC
    location ~* \.(?:jpg|jpeg|gif|png|ico|cur|gz|svg|svgz|mp4|ogg|ogv|webm|htc)$ {
      expires 1M;
      access_log off;
      add_header Cache-Control "public";
    }

    # Javascript and CSS files
    location ~* \.(?:css|js)$ {
        try_files $uri =404;
        expires 1y;
        access_log off;
        add_header Cache-Control "public";
    }

}
